<!doctype html><html lang=fr class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://documentation-9908be.gitlab.io/informatique/camera/ rel=canonical><link href=../URDF/ rel=prev><link href=../raspberry/ rel=next><link rel=icon href=../../assets/favicon.svg><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.20"><title>Traitement Images - BiblioTech</title><link rel=stylesheet href=../../assets/stylesheets/main.e53b48f4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=https://tikzjax.com/v1/fonts.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#traitement-images class=md-skip> Aller au contenu </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=En-tête> <a href=../.. title=BiblioTech class="md-header__button md-logo" aria-label=BiblioTech data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M352 0c0-17.7-14.3-32-32-32s-32 14.3-32 32v64h-96c-53 0-96 43-96 96v224c0 53 43 96 96 96h256c53 0 96-43 96-96V160c0-53-43-96-96-96h-96zM160 368c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24s-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24m120 0c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24s-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24m120 0c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24s-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24M224 176a48 48 0 1 1 0 96 48 48 0 1 1 0-96m144 48a48 48 0 1 1 96 0 48 48 0 1 1-96 0m-304 0c0-17.7-14.3-32-32-32S0 206.3 0 224v96c0 17.7 14.3 32 32 32s32-14.3 32-32zm544-32c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32s32-14.3 32-32v-96c0-17.7-14.3-32-32-32"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> BiblioTech </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Traitement Images </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Passer en thème clair" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Passer en thème clair" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=blue-grey data-md-color-accent=indigo aria-label="Passer en thème sombre" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Passer en thème sombre" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=blue-grey data-md-color-accent=indigo aria-label="Passer à la préférence système" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Passer à la préférence système" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Rechercher placeholder=Rechercher autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Recherche> <button type=reset class="md-search__icon md-icon" title=Effacer aria-label=Effacer tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initialisation de la recherche </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Onglets data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Accueil </a> </li> <li class=md-tabs__item> <a href=../../electronique/ class=md-tabs__link> Électronique </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> Informatique </a> </li> <li class=md-tabs__item> <a href=../../mecanique/ class=md-tabs__link> Mécanique </a> </li> <li class=md-tabs__item> <a href=../../lore/ class=md-tabs__link> Lore </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=BiblioTech class="md-nav__button md-logo" aria-label=BiblioTech data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M352 0c0-17.7-14.3-32-32-32s-32 14.3-32 32v64h-96c-53 0-96 43-96 96v224c0 53 43 96 96 96h256c53 0 96-43 96-96V160c0-53-43-96-96-96h-96zM160 368c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24s-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24m120 0c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24s-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24m120 0c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24s-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24M224 176a48 48 0 1 1 0 96 48 48 0 1 1 0-96m144 48a48 48 0 1 1 96 0 48 48 0 1 1-96 0m-304 0c0-17.7-14.3-32-32-32S0 206.3 0 224v96c0 17.7 14.3 32 32 32s32-14.3 32-32zm544-32c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32s32-14.3 32-32v-96c0-17.7-14.3-32-32-32"/></svg> </a> BiblioTech </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Accueil </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <div class="md-nav__link md-nav__container"> <a href=../../electronique/ class="md-nav__link "> <span class=md-ellipsis> Électronique </span> </a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Électronique </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> Informatique </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Informatique </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../simulation/ class=md-nav__link> <span class=md-ellipsis> Simulation avec PyBullet </span> </a> </li> <li class=md-nav__item> <a href=../URDF/ class=md-nav__link> <span class=md-ellipsis> Fichiers URDF </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Traitement Images </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Traitement Images </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table des matières"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table des matières </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=#algorithme-de-traitement-camera class=md-nav__link> <span class=md-ellipsis> Algorithme de traitement caméra </span> </a> </li> <li class=md-nav__item> <a href=#structure-du-code class=md-nav__link> <span class=md-ellipsis> Structure du code </span> </a> </li> <li class=md-nav__item> <a href=#initialisation-et-configuration-des-cameras class=md-nav__link> <span class=md-ellipsis> Initialisation et configuration des caméras </span> </a> </li> <li class=md-nav__item> <a href=#correction-de-perspective class=md-nav__link> <span class=md-ellipsis> Correction de perspective </span> </a> </li> <li class=md-nav__item> <a href=#detection-de-codes-aruco-robot-pami class=md-nav__link> <span class=md-ellipsis> Détection de codes ArUco (robot, PAMI) </span> </a> </li> <li class=md-nav__item> <a href=#detection-dobstacles-par-couleur class=md-nav__link> <span class=md-ellipsis> Détection d'obstacles par couleur </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../raspberry/ class=md-nav__link> <span class=md-ellipsis> Raspberry Pi </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../mecanique/ class="md-nav__link "> <span class=md-ellipsis> Mécanique </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Mécanique </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../mecanique/projet-esperluette-tech/ class=md-nav__link> <span class=md-ellipsis> Projet & Tech </span> </a> </li> <li class=md-nav__item> <a href=../../mecanique/introduction-mecanique/ class=md-nav__link> <span class=md-ellipsis> Introduction à la mécanique </span> </a> </li> <li class=md-nav__item> <a href=../../mecanique/solidworks/ class=md-nav__link> <span class=md-ellipsis> SolidWorks </span> </a> </li> <li class=md-nav__item> <a href=../../mecanique/todo/ class=md-nav__link> <span class=md-ellipsis> Todo </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <div class="md-nav__link md-nav__container"> <a href=../../lore/ class="md-nav__link "> <span class=md-ellipsis> Lore </span> </a> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Lore </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table des matières"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table des matières </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=#algorithme-de-traitement-camera class=md-nav__link> <span class=md-ellipsis> Algorithme de traitement caméra </span> </a> </li> <li class=md-nav__item> <a href=#structure-du-code class=md-nav__link> <span class=md-ellipsis> Structure du code </span> </a> </li> <li class=md-nav__item> <a href=#initialisation-et-configuration-des-cameras class=md-nav__link> <span class=md-ellipsis> Initialisation et configuration des caméras </span> </a> </li> <li class=md-nav__item> <a href=#correction-de-perspective class=md-nav__link> <span class=md-ellipsis> Correction de perspective </span> </a> </li> <li class=md-nav__item> <a href=#detection-de-codes-aruco-robot-pami class=md-nav__link> <span class=md-ellipsis> Détection de codes ArUco (robot, PAMI) </span> </a> </li> <li class=md-nav__item> <a href=#detection-dobstacles-par-couleur class=md-nav__link> <span class=md-ellipsis> Détection d'obstacles par couleur </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=traitement-images>Traitement Images<a class=headerlink href=#traitement-images title="Permanent link">&para;</a></h1> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <p>Ce document explique le fonctionnement de l'algorithme de traitement des caméras virtuelles dans la simulation PyBullet et également en conditions réelles, utilisées pour la détection d'obstacles et de marqueurs ArUco. L'objectif est de traiter la capture d'images, la détection d'objets par couleur, la localisation 3D et la calibration des caméras.</p> <p>On traitera ici les deux parties, simulation (<code>mainCameraSimu.py</code>) et réalité (<code>mainCameraReel.py</code>), car elles sont très similaires et partagent une grande partie du code.</p> <h2 id=algorithme-de-traitement-camera>Algorithme de traitement caméra<a class=headerlink href=#algorithme-de-traitement-camera title="Permanent link">&para;</a></h2> <p>L'algorithme de traitement des caméras se décompose en plusieurs étapes clés :</p> <ol> <li><strong>Capture d'images</strong> : Acquisition des images depuis la caméra (virtuelle ou réelle).</li> <li><strong>Prétraitement</strong> : Conversion des images en niveaux de gris, application de filtres pour réduire le bruit et améliorer la qualité de l'image.</li> <li><strong>Calibration</strong> : Utilisation de la calibration de la caméra pour corriger les distorsions et obtenir des mesures précises.</li> <li><strong>Détection d'objets</strong> :</li> <li><strong>Détection par couleur</strong> : Segmentation des objets basés sur des plages de couleurs définies (HSV) pour identifier les obstacles.</li> <li><strong>Détection ArUco</strong> : Utilisation de la bibliothèque OpenCV pour détecter les marqueurs ArUco dans l'image.</li> <li><strong>Localisation 3D</strong> : Calcul des positions 3D des objets détectés en utilisant les informations de profondeur (dans le cas de la caméra réelle) ou les paramètres de la caméra virtuelle.</li> <li><strong>Affichage et visualisation</strong> : Superposition des résultats de la détection sur l'image originale pour visualiser les objets détectés et leurs positions.</li> </ol> <h2 id=structure-du-code>Structure du code<a class=headerlink href=#structure-du-code title="Permanent link">&para;</a></h2> <p>Le code est organisé en plusieurs modules pour faciliter la maintenance et la compréhension :</p> <ul> <li><code>config.py</code> : Contient les paramètres de configuration pour la caméra, les plages de couleurs, et les paramètres de calibration.</li> <li><code>utils/virtualCamera.py</code> : Crée et paramètre les caméra virtuelle dans PyBullet.</li> <li><code>utils/segmentation.py</code> : Contient les fonctions pour la segmentation des images basées sur la couleur.</li> <li><code>utils/perspectiveCorrection.py</code> : Gère la correction de perspective des positions capturées.</li> <li><code>utils/arucoDetection.py</code> : Implémente la détection des marqueurs ArUco.</li> <li><code>utils/imageTransform.py</code> : Contient des fonctions utilitaires pour la transformation de perspective de la table.</li> </ul> <h2 id=initialisation-et-configuration-des-cameras>Initialisation et configuration des caméras<a class=headerlink href=#initialisation-et-configuration-des-cameras title="Permanent link">&para;</a></h2> <p>Les caméras doivent respecter certaines contraintes de position (fixée par le règlement de la Coupe de France de Robotique), de plus nous avons des exigences supplémentaires : voir la table en entier, avoir une bonne résolution, et minimiser les occlusions. Pour cela nous avons choisi 2 caméras placées en hauteur aux coins opposés de la table, inclinées vers le centre.</p> <p>Les caméras virtuelles sont paramétrées pour correspondre aux caractéristiques des caméras réelles utilisées (FOV, position, orientation).</p> <h2 id=correction-de-perspective>Correction de perspective<a class=headerlink href=#correction-de-perspective title="Permanent link">&para;</a></h2> <p>Pour obtenir une vue "de dessus" de la table, nous appliquons une transformation de perspective aux images capturées. Cela permet de compenser l'angle d'inclinaison des caméras et de faciliter la détection des objets sur la table. La transformation s'appuie sur les 4 codes ArUco placés aux coins de la table. La transformation suit les étapes suivantes :</p> <ol> <li>Utilisation de la matrice de transformation stockée dans <code>perspectiveMatrix.txt&lt;camNumber&gt;</code>.</li> <li>Si absente, calcul de la matrice de transformation en détectant les marqueurs ArUco aux coins de la table.</li> <li>Si manquant, utilisation des positions définies par l'utilisateur via des clics souris (ordre à respecter : coin haut gauche puis sens horaire).</li> <li>Application de la transformation pour obtenir une vue corrigée de la table.</li> </ol> <p>Le fichier <code>perspectiveMatrix.txt&lt;camNumber&gt;</code> est sauvegardé pour éviter de recalculer la matrice à chaque exécution. Il contient le ratio de pixels par mètre pour les axes X et Y, ainsi que la matrice de transformation homographique 3x3.</p> <h2 id=detection-de-codes-aruco-robot-pami>Détection de codes ArUco (robot, PAMI)<a class=headerlink href=#detection-de-codes-aruco-robot-pami title="Permanent link">&para;</a></h2> <p>En permanence, l'algorithme tente de détecter les codes ArUco dans l'image capturée, en cherchant la présence des codes robot et PAMI. Si détectés, leurs positions sont utilisées pour localiser précisément le robot et le PAMI sur la table. La détection suit les étapes suivantes :</p> <ol> <li>Conversion de l'image en niveaux de gris.</li> <li>Détection des marqueurs ArUco en utilisant les fonctions d'OpenCV.</li> <li>Mise en évidence des marqueurs détectés sur l'image.</li> <li>Calcul des positions 3D réelles des marqueurs en utilisant les paramètres de la caméra.</li> </ol> <h2 id=detection-dobstacles-par-couleur>Détection d'obstacles par couleur<a class=headerlink href=#detection-dobstacles-par-couleur title="Permanent link">&para;</a></h2> <p>L'algorithme segmente l'image pour détecter les obstacles basés sur des plages de couleurs définies (HSV). Chaque type d'obstacle (rouge, vert, bleu, jaune) est détecté séparément. La détection suit les étapes suivantes :</p> <ol> <li>Conversion de l'image en espace de couleur HSV.</li> <li>Application de masques pour chaque plage de couleur définie dans <code>config.py</code>.</li> <li>Extraction des contours des objets détectés.</li> <li>Mise en évidence des marqueurs détectés sur l'image.</li> <li>Calcul des positions 3D réelles des marqueurs en utilisant les paramètres de la caméra.</li> </ol> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label="Pied de page"> <a href=../URDF/ class="md-footer__link md-footer__link--prev" aria-label="Précédent: Fichiers URDF"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Précédent </span> <div class=md-ellipsis> Fichiers URDF </div> </div> </a> <a href=../raspberry/ class="md-footer__link md-footer__link--next" aria-label="Suivant: Raspberry Pi"> <div class=md-footer__title> <span class=md-footer__direction> Suivant </span> <div class=md-ellipsis> Raspberry Pi </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2025 Projet & Tech </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://www.instagram.com/projet_tech_42/ target=_blank rel=noopener title=Instagram class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M224.3 141a115 115 0 1 0-.6 230 115 115 0 1 0 .6-230m-.6 40.4a74.6 74.6 0 1 1 .6 149.2 74.6 74.6 0 1 1-.6-149.2m93.4-45.1a26.8 26.8 0 1 1 53.6 0 26.8 26.8 0 1 1-53.6 0m129.7 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8M399 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1"/></svg> </a> <a href=mailto:projet-tech@fatse.fr target=_blank rel=noopener title=Mail class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M536.4-26.3c9.8-3.5 20.6-1 28 6.3s9.8 18.2 6.3 28l-178 496.9c-5 13.9-18.1 23.1-32.8 23.1-14.2 0-27-8.6-32.3-21.7l-64.2-158c-4.5-11-2.5-23.6 5.2-32.6l94.5-112.4c5.1-6.1 4.7-15-.9-20.6s-14.6-6-20.6-.9l-112.4 94.3c-9.1 7.6-21.6 9.6-32.6 5.2L38.1 216.8c-13.1-5.3-21.7-18.1-21.7-32.3 0-14.7 9.2-27.8 23.1-32.8z"/></svg> </a> <a href=https://github.com/Projet-et-Tech/ target=_blank rel=noopener title=GitHub class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.path", "navigation.indexes", "search.suggest", "navigation.footer", "content.action.edit", "content.action.view", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.f55a23d4.min.js></script> <script src=../../javascripts/mathjax.js></script> <script src=https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js></script> <script src=https://tikzjax.com/v1/tikzjax.js></script> </body> </html>